<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì‹œíŒ</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        input, textarea { width: 300px; margin-bottom: 10px; }
        button { margin: 5px; }
        .board { margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px; }
    </style>
</head>
<body>

<h1>ğŸ“‹ ê²Œì‹œíŒ</h1>

<h2>ê¸€ ì‘ì„±</h2>
<input type="text" id="title" placeholder="ì œëª©"><br>
<textarea id="content" rows="4" placeholder="ë‚´ìš©"></textarea><br>
<input type="text" id="writer" placeholder="ì‘ì„±ì"><br>
<button onclick="createPost()">ë“±ë¡</button>

<h2>ê¸€ ëª©ë¡</h2>
<button onclick="loadPosts()">ìƒˆë¡œê³ ì¹¨</button>
<div id="boardList"></div>

<script>
    const baseUrl = 'http://localhost:8080/board';

    function createPost() {
        const data = {
            title: document.getElementById('title').value,
            content: document.getElementById('content').value,
            writer: document.getElementById('writer').value
        };

        fetch(`${baseUrl}/write`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        })
            .then(res => res.json())
            .then(post => {
                alert('ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                loadPosts();
            });
    }

    function loadPosts() {
        fetch(`${baseUrl}/list`)
            .then(res => res.json())
            .then(posts => {
                const listDiv = document.getElementById('boardList');
                listDiv.innerHTML = '';
                posts.forEach(post => {
                    const postDiv = document.createElement('div');
                    postDiv.className = 'board';
                    postDiv.innerHTML = `
              <strong>${post.title}</strong> (${post.writer})<br>
              ${post.content}<br>
              <button onclick="deletePost(${post.id})">ì‚­ì œ</button>
            `;
                    listDiv.appendChild(postDiv);
                });
            });
    }

    function deletePost(id) {
        fetch(`${baseUrl}/delete/${id}`, {
            method: 'DELETE'
        })
            .then(() => {
                alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                loadPosts();
            });
    }

    // í˜ì´ì§€ ì—´ë¦´ ë•Œ ëª©ë¡ ë¡œë”©
    window.onload = loadPosts;
</script>
</body>
</html>
